
-- benchmark
-- Runs some processing intensive programs
--
-- Performance History
--	1,042,397,939	original
--    954,578,645	ISA update
--

library _badappleplayer;
library _mandel;

external function _badappleplayer.main of none;
external function _mandel.mandel of none;

variable hcf is ptr gets -1;

variable iret is u8 gets 0xD7;
variable nmi is u32 pointer gets 4;

function main of none begin
	at nmi gets to iret;

	-- run benchmarks
	call _mandel.mandel with none;
	call _badappleplayer.main with none;
	
	-- halt and catch fire
	call hcf with none;
end function
